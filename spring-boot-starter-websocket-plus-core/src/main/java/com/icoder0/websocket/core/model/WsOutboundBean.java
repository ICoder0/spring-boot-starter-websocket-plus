package com.icoder0.websocket.core.model;import com.alibaba.fastjson.annotation.JSONField;import com.icoder0.websocket.core.exception.WsBusiCode;import lombok.AccessLevel;import lombok.Builder;import lombok.Data;/** * @author bofa1ex * @since 2020/6/30 */@Data@Builder(access = AccessLevel.PRIVATE)public class WsOutboundBean<T> {    /* 消息序号, 如果自定义下行数据格式, 必须强制性要求该字段 */    @JSONField    private Long seq;    @JSONField(ordinal = 1)    private Integer code;    @JSONField(ordinal = 2)    private T content;    @JSONField(ordinal = 3)    private String message;    public static WsOutboundBeanStatus status(WsBusiCode code) {        return new WsOutboundBeanStatus(code);    }    public static WsOutboundBeanStatus ok() {        return new WsOutboundBeanStatus(WsBusiCode.OK);    }    public static class WsOutboundBeanStatus {        private final WsBusiCode code;        public WsOutboundBeanStatus(WsBusiCode code) {            this.code = code;        }        /*         * 必须强制性要求下行数据带消息序号         */        public WsOutboundBeanSeq sequence(Long seq) {            return new WsOutboundBeanSeq(code, seq);        }    }    public static class WsOutboundBeanSeq {        private final WsBusiCode code;        private final Long seq;        public WsOutboundBeanSeq(WsBusiCode code, Long seq) {            this.code = code;            this.seq = seq;        }        public <T> WsOutboundBean<T> body(T body) {            return WsOutboundBean.<T>builder()                    .seq(seq)                    .code(code.getCode())                    .content(body)                    .build();        }        public <T> WsOutboundBean<T> message(String message) {            return WsOutboundBean.<T>builder()                    .seq(seq)                    .code(code.getCode())                    .message(String.format(code.getZhMsg(), message))                    .build();        }    }}